# –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –£–°–¢–ê–ù–û–í–ö–ï –ò –ù–ê–°–¢–†–û–ô–ö–ï –ë–û–¢–ê –†–ê–°–ü–ò–°–ê–ù–ò–Ø

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
3. [–ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–º–∏–≥—Ä–∞—Ü–∏—è-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
4. [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-—Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è)
5. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-–Ω–æ–≤—ã—Ö-—Ñ–∞–π–ª–æ–≤)
6. [–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π](#—É—á–µ—Ç–Ω—ã–µ-–¥–∞–Ω–Ω—ã–µ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
7. [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–æ—Ç–∞](#—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª-–±–æ—Ç–∞)

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+
- PostgreSQL 13+
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏: aiogram, psycopg2

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```bash
cd /tg-bot-schedule
psql -U postgres -d schedule_bot_db -f /home/claude/migration_add_features.sql
```

### 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã

```bash
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–æ–ª–µ–π
cp /home/config_roles.py config/roles.py

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
cp /home/bot_commands.py bot/commands.py

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
cp /home/bot_settings_handlers.py bot/settings_handlers.py

# –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
cp /home/bot_admin_handlers.py bot/admin_handlers.py

# –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
cp /home/generate_schedule.py scripts/generate_schedule.py
chmod +x scripts/generate_schedule.py
```

---

## –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ú–∏–≥—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç:
- –ü–æ–ª–µ `lesson_type` –≤ —Ç–∞–±–ª–∏—Ü—É `subjects` (lecture, practice, lab)
- –¢–∞–±–ª–∏—Ü—É `user_preferences` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –¢–∞–±–ª–∏—Ü—É `user_activity_log` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

**–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:**
```bash
psql -U postgres -d schedule_bot_db -f migration_add_features.sql
```

---

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

–°–∫—Ä–∏–ø—Ç `generate_schedule.py` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Å–µ–º–µ—Å—Ç—Ä (18 –Ω–µ–¥–µ–ª—å).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–µ–º–µ—Å—Ç—Ä (–æ—Å–µ–Ω–Ω–∏–π —Å 1 —Å–µ–Ω—Ç—è–±—Ä—è, –≤–µ—Å–µ–Ω–Ω–∏–π —Å 1 —Ñ–µ–≤—Ä–∞–ª—è)
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 2-4 –ø–∞—Ä—ã –≤ –¥–µ–Ω—å –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã
- –°–ª—É—á–∞–π–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–µ–¥–º–µ—Ç—ã, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –∏ –∞—É–¥–∏—Ç–æ—Ä–∏–∏
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Ç–∏–ø—ã –∑–∞–Ω—è—Ç–∏–π (–ª–µ–∫—Ü–∏—è/–ø—Ä–∞–∫—Ç–∏–∫–∞/–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è)

**–ó–∞–ø—É—Å–∫:**
```bash
python scripts/generate_schedule.py
```

**–í—ã–≤–æ–¥:**
```
==============================================================
–ì–ï–ù–ï–†–ê–¶–ò–Ø –†–ê–°–ü–ò–°–ê–ù–ò–Ø –ù–ê –°–ï–ú–ï–°–¢–†
==============================================================

–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Å–µ–º–µ—Å—Ç—Ä–∞: 01.09.2024

1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –∑–∞–Ω—è—Ç–∏–π...
‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –¥–ª—è 10 –ø—Ä–µ–¥–º–µ—Ç–æ–≤

2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ 18 –Ω–µ–¥–µ–ª—å...
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ 18 –Ω–µ–¥–µ–ª—å...
–ì—Ä—É–ø–ø: 3, –ü—Ä–µ–¥–º–µ—Ç–æ–≤: 10

–ù–µ–¥–µ–ª—è 1: 02.09.2024
...

‚úÖ –£—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ 1234 –∑–∞–Ω—è—Ç–∏–π

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
  –í—Å–µ–≥–æ –∑–∞–Ω—è—Ç–∏–π: 1234
  –ó–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–æ –≥—Ä—É–ø–ø: 3
  –ó–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π: 5
  –ó–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–æ –∞—É–¥–∏—Ç–æ—Ä–∏–π: 8

==============================================================
–ì–û–¢–û–í–û!
==============================================================
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

### 1. –û–±–Ω–æ–≤–∏—Ç—å `config/settings.py`

–î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç —Ä–æ–ª–µ–π:
```python
from config.roles import ROLES, TEST_USERS, check_permission
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å `bot/handlers.py`

–î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞:
```python
from bot.commands import (
    cmd_schedule_with_params,
    cmd_week_with_params,
    cmd_teacher_with_params,
    cmd_room_with_params,
    cmd_find_with_params
)
from bot.settings_handlers import (
    cmd_settings,
    settings_notifications,
    settings_notification_time,
    settings_teacher_contacts,
    settings_compact_view,
    settings_week_start,
    settings_theme,
    process_notification_time,
    SettingsStates
)
from bot.admin_handlers import (
    cmd_admin,
    cmd_stats,
    cmd_export,
    admin_stats,
    admin_users,
    admin_export_schedule,
    admin_logs,
    admin_report,
    log_user_action
)
```

–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã:
```python
# –ü–æ—Å–ª–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–∞–Ω–¥ –¥–æ–±–∞–≤–∏—Ç—å:

# –ö–æ–º–∞–Ω–¥—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
@dp.message(Command("schedule"))
async def schedule_command(message: types.Message):
    await cmd_schedule_with_params(message)

@dp.message(Command("week"))
async def week_command(message: types.Message):
    await cmd_week_with_params(message)

@dp.message(Command("find"))
async def find_command(message: types.Message):
    await cmd_find_with_params(message)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏
@dp.message(Command("settings"))
async def settings_command(message: types.Message):
    await cmd_settings(message)

@dp.callback_query(F.data == "settings_notifications")
async def settings_notif_callback(callback: types.CallbackQuery):
    await settings_notifications(callback)

@dp.callback_query(F.data == "settings_notification_time")
async def settings_time_callback(callback: types.CallbackQuery, state: FSMContext):
    await settings_notification_time(callback, state)

@dp.callback_query(F.data == "settings_teacher_contacts")
async def settings_contacts_callback(callback: types.CallbackQuery):
    await settings_teacher_contacts(callback)

@dp.callback_query(F.data == "settings_compact_view")
async def settings_compact_callback(callback: types.CallbackQuery):
    await settings_compact_view(callback)

@dp.callback_query(F.data == "settings_week_start")
async def settings_week_callback(callback: types.CallbackQuery):
    await settings_week_start(callback)

@dp.message(SettingsStates.waiting_for_notification_time)
async def process_time(message: types.Message, state: FSMContext):
    await process_notification_time(message, state)

# –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
@dp.message(Command("admin"))
async def admin_command(message: types.Message):
    await cmd_admin(message)

@dp.message(Command("stats"))
async def stats_command(message: types.Message):
    await cmd_stats(message)

@dp.message(Command("export"))
async def export_command(message: types.Message):
    await cmd_export(message)

@dp.callback_query(F.data == "admin_stats")
async def admin_stats_callback(callback: types.CallbackQuery):
    await admin_stats(callback)

@dp.callback_query(F.data == "admin_users")
async def admin_users_callback(callback: types.CallbackQuery):
    await admin_users(callback)

@dp.callback_query(F.data == "admin_export_schedule")
async def admin_export_callback(callback: types.CallbackQuery):
    await admin_export_schedule(callback)

@dp.callback_query(F.data == "admin_logs")
async def admin_logs_callback(callback: types.CallbackQuery):
    await admin_logs(callback)

@dp.callback_query(F.data == "admin_report")
async def admin_report_callback(callback: types.CallbackQuery):
    await admin_report(callback)
```

### 3. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

–í –∫–∞–∂–¥—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```python
from bot.admin_handlers import log_user_action

# –í –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞:
user = db.get_user_by_telegram_id(message.from_user.id)
if user:
    log_user_action(user['id'], 'view_schedule', f'–ì—Ä—É–ø–ø–∞: {user["group_number"]}')
```

---

## –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã —Å —Ä–∞–∑–Ω—ã–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ –¥–æ—Å—Ç—É–ø–∞ —Å–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:

### 1. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ (Developer)
- **Telegram ID**: 123456789 (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à)
- **–§–ò–û**: –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á
- **Username**: developer_user
- **–ì—Ä—É–ø–ø–∞**: –ò–í–¢-21
- **–ü—Ä–∞–≤–∞**: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º

### 2. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (Admin)
- **Telegram ID**: 987654321
- **–§–ò–û**: –ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤–∏—á
- **Username**: admin_user
- **–ì—Ä—É–ø–ø–∞**: –ò–í–¢-22
- **–ü—Ä–∞–≤–∞**: 
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
  - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

### 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (User)
- **Telegram ID**: 111222333
- **–§–ò–û**: –°–∏–¥–æ—Ä–æ–≤ –°–∏–¥–æ—Ä –°–∏–¥–æ—Ä–æ–≤–∏—á
- **Username**: regular_user
- **–ì—Ä—É–ø–ø–∞**: –ò–í–¢-21
- **–ü—Ä–∞–≤–∞**:
  - –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
  - –ü–æ–∏—Å–∫ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ë–î

```sql
-- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
INSERT INTO users (telegram_id, username, fio, role, group_id) 
VALUES (123456789, 'developer_user', '–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á', 'developer',
        (SELECT id FROM student_groups WHERE group_number = '–ò–í–¢-21'));

-- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
INSERT INTO users (telegram_id, username, fio, role, group_id) 
VALUES (987654321, 'admin_user', '–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤–∏—á', 'admin',
        (SELECT id FROM student_groups WHERE group_number = '–ò–í–¢-22'));

-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
INSERT INTO users (telegram_id, username, fio, role, group_id) 
VALUES (111222333, 'regular_user', '–°–∏–¥–æ—Ä–æ–≤ –°–∏–¥–æ—Ä –°–∏–¥–æ—Ä–æ–≤–∏—á', 'user',
        (SELECT id FROM student_groups WHERE group_number = '–ò–í–¢-21'));
```

---

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–æ—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
1. `/start` - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã, –≤—ã–±–æ—Ä –≥—Ä—É–ø–ø—ã
2. `/help` - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É
3. `/settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. `/cancel` - –û—Ç–º–µ–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è
5. `/about` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ

### –ö–æ–º–∞–Ω–¥—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
1. `/group [–Ω–æ–º–µ—Ä]` - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
2. `/teacher [–§–ò–û]` - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
3. `/room [–Ω–æ–º–µ—Ä]` - –ó–∞–Ω—è—Ç–æ—Å—Ç—å –∞—É–¥–∏—Ç–æ—Ä–∏–∏

### –ö–æ–º–∞–Ω–¥—ã —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö ‚ú®
1. **`/export_schedule [–Ω–æ–º–µ—Ä_–≥—Ä—É–ø–ø—ã] [–¥–Ω–µ–π]`** - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ Excel
   - –ï—Å–ª–∏ –Ω–æ–º–µ—Ä –≥—Ä—É–ø–ø—ã –Ω–µ —É–∫–∞–∑–∞–Ω, –±–µ—Ä–µ—Ç—Å—è –≥—Ä—É–ø–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ï—Å–ª–∏ –¥–Ω–µ–π –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 30 –¥–Ω–µ–π
   - –ü—Ä–∏–º–µ—Ä: `/export_schedule –ë–ü–ò-24 14` - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ë–ü–ò-24 –Ω–∞ 14 –¥–Ω–µ–π

2. **`/export_all_schedule [–¥–Ω–µ–π]`** - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –≥—Ä—É–ø–ø –≤ Excel
   - –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
   - –ü—Ä–∏–º–µ—Ä: `/export_all_schedule 30` - –≤—Å–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ 30 –¥–Ω–µ–π

3. **`/export_logs [–¥–Ω–µ–π] [—Ñ–æ—Ä–º–∞—Ç]`** - –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤ Excel/CSV
   - –§–æ—Ä–º–∞—Ç—ã: `excel`, `xlsx`, `csv`
   - –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
   - –ü—Ä–∏–º–µ—Ä: `/export_logs 7 excel` - –ª–æ–≥–∏ –∑–∞ –Ω–µ–¥–µ–ª—é –≤ Excel

4. **`/logs [–¥–Ω–µ–π]`** - –õ–æ–≥–∏ –≤ CSV (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞)
   - –ë—ã—Å—Ç—Ä—ã–π —ç–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤ –≤ CSV
   - –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º

### –ö–æ–º–∞–Ω–¥—ã –∏–º–ø–æ—Ä—Ç–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è ‚ú® –ù–û–í–û–ï
1. **`/get_template`** - –ü–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω Excel –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
   - –í—ã–¥–∞–µ—Ç —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –¥–ª—è –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º

2. **`/import_schedule`** - –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏–∑ Excel —Ñ–∞–π–ª–∞
   - –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ (–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏, –∞—É–¥–∏—Ç–æ—Ä–∏–∏)
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –≥—Ä—É–ø–ø –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
   - –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –ì—Ä—É–ø–ø–∞, –î–∞—Ç–∞, –ü–∞—Ä–∞, –ù–∞—á–∞–ª–æ, –ö–æ–Ω–µ—Ü, –ü—Ä–µ–¥–º–µ—Ç, –¢–∏–ø, –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å, –ê—É–¥–∏—Ç–æ—Ä–∏—è

3. **`/clear_schedule [–≥—Ä—É–ø–ø–∞] [–æ—Ç_–¥–∞—Ç—ã] [–¥–æ_–¥–∞—Ç—ã]`** - –£–¥–∞–ª–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
   - –ú–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –∏–ª–∏ —Ç–æ–ª—å–∫–æ –∑–∞ –ø–µ—Ä–∏–æ–¥
   - –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
   - –ü—Ä–∏–º–µ—Ä—ã:
     - `/clear_schedule –ë–ü–ò-24` - —É–¥–∞–ª–∏—Ç—å –≤—Å—ë
     - `/clear_schedule –ë–ü–ò-24 2026-02-01 2026-02-28` - —É–¥–∞–ª–∏—Ç—å –∑–∞ –ø–µ—Ä–∏–æ–¥

4. **`/schedule_stats`** - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –≤ –ë–î
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π, –¥–∞—Ç, –≥—Ä—É–ø–ø –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
   - –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞

#### –≠–∫—Å–ø–æ—Ä—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (Excel)
- **–î–∞–Ω–Ω—ã–µ**: –ì—Ä—É–ø–ø–∞, –¥–∞—Ç–∞, –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏, –Ω–æ–º–µ—Ä –ø–∞—Ä—ã, –≤—Ä–µ–º—è, –ø—Ä–µ–¥–º–µ—Ç, —Ç–∏–ø, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å, –∞—É–¥–∏—Ç–æ—Ä–∏—è
- **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¶–≤–µ—Ç–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏, —Ç–∞–±–ª–∏—Ü–∞ —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏, –∞–≤—Ç–æ—à–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ü–æ –Ω–æ–º–µ—Ä—É –≥—Ä—É–ø–ø—ã –∏ –¥–∏–∞–ø–∞–∑–æ–Ω—É –¥–∞—Ç

#### –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤ (Excel)
- **–î–∞–Ω–Ω—ã–µ**: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, Telegram ID, –∏–º—è, –¥–µ–π—Å—Ç–≤–∏–µ, –¥–µ—Ç–∞–ª–∏, –¥–∞—Ç–∞/–≤—Ä–µ–º—è
- **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¶–≤–µ—Ç–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏, —Ç–∞–±–ª–∏—Ü–∞ —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏, –∞–≤—Ç–æ—à–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ü–æ –ø–µ—Ä–∏–æ–¥—É (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π)

#### –ò–º–ø–æ—Ä—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (Excel)
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: –ì—Ä—É–ø–ø–∞, –î–∞—Ç–∞, –ü–∞—Ä–∞, –ù–∞—á–∞–ª–æ, –ö–æ–Ω–µ—Ü, –ü—Ä–µ–¥–º–µ—Ç, –¢–∏–ø, –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å, –ê—É–¥–∏—Ç–æ—Ä–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ**: –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏, –∞—É–¥–∏—Ç–æ—Ä–∏–∏, –ø—Ä–µ–¥–º–µ—Ç—ã (–µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç –≤ –ë–î)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤
- **–û—Ç—á–µ—Ç**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –∏ –æ—à–∏–±–æ–∫

### –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `/users` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `/setrole <tg_id> <role>` - –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å (user|admin|developer)

### –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–ª—é—Å:
- `/setrole <tg_id> <role>` - –ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏
- `/schedule_stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (4 –ø—É–Ω–∫—Ç–∞)
1. üë• –°–º–µ–Ω–∏—Ç—å –≥—Ä—É–ø–ø—É
2. ‚è∞ –§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏ (24—á/12—á)
3. üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–≤–∫–ª/–≤—ã–∫–ª)
4. üìÖ –í–∏–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–¥–µ–Ω—å/–Ω–µ–¥–µ–ª—è)

### –£—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞ (3 —É—Ä–æ–≤–Ω—è)
1. **Developer**: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º
2. **Admin**: –î–æ—Å—Ç—É–ø –∫ —ç–∫—Å–ø–æ—Ä—Ç—É, –∏–º–ø–æ—Ä—Ç—É –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
3. **User**: –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [IMPORT_EXPORT_GUIDE.md](IMPORT_EXPORT_GUIDE.md) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–º–ø–æ—Ä—Ç—É –∏ —ç–∫—Å–ø–æ—Ä—Ç—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- [DIAGNOSTICS.md](DIAGNOSTICS.md) - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º –∏ —Ä–µ—à–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
python main.py
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**:
- `/start` - –≤—ã–±–æ—Ä –≥—Ä—É–ø–ø—ã
- `/schedule –ò–í–¢-21` - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
- `/week 1` - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ 1-–π –Ω–µ–¥–µ–ª–∏
- `/settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**:
- `/admin` - –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- `/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/export` - —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```sql
SELECT * FROM user_activity_log ORDER BY created_at DESC LIMIT 20;
```

---

## –ê–≤—Ç–æ—Ä

**–§–ò–û**: –†–æ–º–∞–Ω–æ–≤ –î–º–∏—Ç—Ä–∏–π –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á 
**–ì—Ä—É–ø–ø–∞**: o.–ò–ó–î—Ç—Å 23.2/–ë1-22 

---

## –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

–î–µ–∫–∞–±—Ä—å 2024
